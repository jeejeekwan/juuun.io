(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/b8u":function(e,t,n){var r=n("STAE");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"/qmn":function(e,t,n){var r=n("2oRo");e.exports=r.Promise},"8GlL":function(e,t,n){"use strict";var r=n("HAuM"),o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},"8oxB":function(e,t){var n,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var l,u=[],s=!1,m=-1;function f(){s&&l&&(s=!1,l.length?u=l.concat(u):m=-1,u.length&&d())}function d(){if(!s){var e=c(f);s=!0;for(var t=u.length;t;){for(l=u,u=[];++m<t;)l&&l[m].run();m=-1,t=u.length}l=null,s=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new v(e,t)),1!==u.length||s||c(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"9N29":function(e,t,n){"use strict";var r=n("I+eb"),o=n("1Y/n").right,a=n("pkCn"),i=n("rkAj"),c=n("LQDL"),l=n("YF1G"),u=a("reduceRight"),s=i("reduce",{1:0});r({target:"Array",proto:!0,forced:!u||!s||!l&&c>79&&c<83},{reduceRight:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},RXIq:function(e,t,n){e.exports=n.p+"static/avatar-playing-33e6cd8e7b1584567aa0300356fc14b8.jpg"},SEBh:function(e,t,n){var r=n("glrk"),o=n("HAuM"),a=n("tiKp")("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||null==(n=r(i)[a])?t:o(n)}},STAE:function(e,t,n){var r=n("0Dky");e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"Xd+9":function(e,t,n){},ltEL:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),o=n.n(r),a=n("Wbzz"),i=n("TSYQ"),c=n.n(i),l=n("BjEN"),u=n.n(l);function s(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}function m(e){try{var t=new Date(e).getTime(),n=(new Date).getTime()-t,r=Math.floor(n/864e5);if(0===r){var o=n%864e5,a=Math.floor(o/36e5);if(0===a){var i=o%36e5,c=Math.floor(i/6e4);if(0===c){var l=i%6e4;return Math.round(l/1e3)+" 秒前"}return c+" 分钟前"}return a+" 小时前"}return r<0?"刚刚":r<8?r+" 天前":function(e){var t=new Date(e),n=(new Date).getFullYear(),r=s(t.getDate(),2),o=s(t.getMonth()+1,2),a=s(t.getFullYear(),2);return a<n?a+"年"+o+"月"+r+"日":o+"月"+r+"日"}(e)}catch(u){console.log(u)}}var f=n("vrFN"),d=function(e){var t=e.size,n=void 0===t?14:t;return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"currentColor"},o.a.createElement("path",{d:"M6.69921 18.8518C7.06377 18.8518 7.34328 18.5438 7.34328 18.1182L7.33136 15.432L8.44941 14.8048L11.4883 12.8523L11.2814 16.3903V17.645L8.87517 18.9705C8.48623 19.1835 8.36437 19.5738 8.55883 19.8813C8.76575 20.2484 9.15468 20.2954 9.53117 20.0828L11.2814 19.1123V21.2542C11.2814 21.692 11.5733 22 11.9986 22C12.4482 22 12.7158 21.692 12.7158 21.2542V19.1123L14.4535 20.0828C14.8305 20.2959 15.2195 20.2484 15.4383 19.8935C15.6328 19.5738 15.499 19.1835 15.1101 18.9705L12.7158 17.645V16.3903L12.5089 12.8518L15.5477 14.7927L16.6658 15.4198L16.6414 18.1182C16.6414 18.5443 16.9215 18.8518 17.2979 18.8518C17.7351 18.8518 17.9664 18.5322 17.9664 18.1182V16.1656L19.8867 17.2426C20.2756 17.4557 20.6765 17.3729 20.8834 16.9942C21.1022 16.6392 20.9804 16.2247 20.6034 16.0237L18.6836 14.9467L20.4214 13.9647C20.7984 13.7516 20.9565 13.3966 20.7377 13.0417C20.5432 12.722 20.1543 12.6276 19.7653 12.8523L17.383 14.2131L16.2649 13.586L13.0072 12L16.2649 10.4145L17.383 9.77531L19.7653 11.1361C20.1418 11.3608 20.5551 11.2663 20.7496 10.9583C20.956 10.5918 20.7984 10.2363 20.4214 10.0237L18.6955 9.04166L20.6039 7.97627C20.9928 7.75158 21.1142 7.37289 20.8834 6.99419C20.6765 6.63923 20.2756 6.53269 19.8867 6.75738L17.9664 7.83439L17.9539 5.87024C17.9539 5.4562 17.7351 5.13608 17.2979 5.14819C16.9209 5.14819 16.6414 5.44408 16.6414 5.87024L16.6658 8.56753L15.5477 9.19465L12.5089 11.1356L12.7158 7.59707V6.34284L15.1101 5.01792C15.499 4.80485 15.6328 4.41404 15.4383 4.10654C15.2195 3.73996 14.8305 3.6925 14.4535 3.90558L12.7158 4.87604V2.73365C12.7158 2.29589 12.4482 2 11.9986 2C11.5733 2 11.2814 2.29589 11.2814 2.73365V4.87604L9.53117 3.90558C9.15468 3.70412 8.76575 3.73996 8.55883 4.10654C8.36437 4.41454 8.48623 4.80485 8.87517 5.01792L11.2814 6.34335V7.59758L11.4883 11.1482L8.44941 9.19515L7.33136 8.55643L7.34328 5.87024C7.34328 5.44408 7.06377 5.14819 6.69921 5.14819C6.26204 5.14819 6.03076 5.4562 6.03076 5.87024L6.01883 7.82277L4.11046 6.75738C3.73397 6.54431 3.32066 6.63923 3.11375 6.99419C2.88298 7.37289 3.01677 7.76319 3.39378 7.97627L5.30163 9.04166L3.5758 10.0237C3.19879 10.2368 3.0287 10.5802 3.24754 10.9588C3.43008 11.2663 3.85531 11.3608 4.23232 11.1361L6.61416 9.78692L7.73222 10.414L10.9899 12L7.73222 13.5855L6.61416 14.2131L4.2318 12.8518C3.84287 12.6271 3.44201 12.722 3.25947 13.0295C3.05307 13.4082 3.19879 13.7516 3.5758 13.9647L5.30163 14.9467L3.39326 16.0237C3.01677 16.2247 2.89542 16.6387 3.11375 16.9942C3.33259 17.3729 3.73345 17.4436 4.11046 17.2426L6.01883 16.1656L6.03076 18.1182C6.03076 18.5322 6.26153 18.8518 6.69973 18.8518H6.69921Z"}))},v=function(){},p=function(e){var t=e.postId,n=e.defaultTemperature,a=e.index,i=e.onColder,u=e.onColdest,s=Object(r.useState)(n),m=s[0],f=s[1],p=Object(r.useState)(),h=p[0],y=p[1],L=function(){return JSON.parse(localStorage.getItem("coldHistory"))};return Object(r.useEffect)((function(){var e=L();y(!!e&&e[t])}),[t]),o.a.createElement("span",{className:c()("overlay-action",{"overlay-action-frozen":h}),onKeyDown:v,onClick:function(){var e=function(){var e,n=L();if(n){var r=n[t]?-1:1;return 1===r&&273===m?(u(),0):(n[t]=!n[t],localStorage.setItem("coldHistory",JSON.stringify(n)),r)}return localStorage.setItem("coldHistory",JSON.stringify(((e={})[t]=!0,e))),1}();e&&(f(m+e),y(e>0),l.Cloud.run("updateColdTemperature",{postId:t,isDecrement:e<0}),i(e))},role:"button",tabIndex:a},o.a.createElement(d,{size:18}),o.a.createElement("span",null,m?"-"+m+"°C":"好冷"))},h=function(e){var t=e.size,n=void 0===t?14:t;return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o.a.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.a.createElement("polyline",{points:"9 22 9 12 15 12 15 22"}))},y=function(e){var t=e.size,n=void 0===t?14:t;return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"currentColor"},o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.4999 5.3499C3.41706 5.3499 3.3499 5.41706 3.3499 5.4999V15.4999C3.3499 15.5827 3.41706 15.6499 3.4999 15.6499H5.4999C6.24549 15.6499 6.8499 16.2543 6.8499 16.9999V17.7999L9.22324 16.0199C9.54346 15.7797 9.93295 15.6499 10.3332 15.6499H20.4999C20.5827 15.6499 20.6499 15.5827 20.6499 15.4999V5.4999C20.6499 5.41706 20.5827 5.3499 20.4999 5.3499H3.4999ZM1.6499 5.4999C1.6499 4.47818 2.47817 3.6499 3.4999 3.6499H20.4999C21.5216 3.6499 22.3499 4.47818 22.3499 5.4999V15.4999C22.3499 16.5216 21.5216 17.3499 20.4999 17.3499H10.3332C10.3008 17.3499 10.2692 17.3604 10.2432 17.3799L5.1499 21.1999V17.3499H3.4999C2.47818 17.3499 1.6499 16.5216 1.6499 15.4999V5.4999Z"}))},L=function(e){var t=e.size,n=void 0===t?14:t;return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),o.a.createElement("line",{x1:"14.31",y1:"8",x2:"20.05",y2:"17.94"}),o.a.createElement("line",{x1:"9.69",y1:"8",x2:"21.17",y2:"8"}),o.a.createElement("line",{x1:"7.38",y1:"12",x2:"13.12",y2:"2.06"}),o.a.createElement("line",{x1:"9.69",y1:"16",x2:"3.95",y2:"6.06"}),o.a.createElement("line",{x1:"14.31",y1:"16",x2:"2.83",y2:"16"}),o.a.createElement("line",{x1:"16.62",y1:"12",x2:"10.88",y2:"21.94"}))},C=n("RXIq"),E=n.n(C);n("Xd+9"),t.default=function(){var e,t=Object(r.useState)([]),n=t[0],i=t[1],l=Object(r.useState)(),s=l[0],d=l[1],v=Object(r.useState)(!1),C=v[0],g=v[1],w=Object(r.useState)("未完成功能"),x=w[0],b=w[1],T=function(t){void 0===t&&(t="未完成功能"),b(t),g(!0),e&&clearTimeout(e),e=setTimeout((function(){g(!1)}),1600)};return Object(r.useEffect)((function(){u.a.init({serverURL:"https://api.framercn.com",appId:"kjcS77HUsT0IcrFubkguM4lF-gzGzoHsz",appKey:"VFeBxiCvxWK6DtTRumxUVjSo"});var e=new u.a.Query("MyNewTimeline");e.equalTo("isValid",!0),e.descending("createdAt"),e.find().then((function(e){var t=e.map((function(e){return e.toJSON()}));i(t)}))}),[]),o.a.createElement("div",{className:"layout-cold container",onClickCapture:function(){d()}},o.a.createElement(f.a,{title:"-85°C | 冷笑话集合"}),o.a.createElement("div",{className:"tl-cover"},o.a.createElement(a.a,{to:"/",rel:"home",className:"cover-home"},o.a.createElement(h,{size:24})),o.a.createElement("span",null,"Juuun"),o.a.createElement("img",{src:E.a,alt:"头像"}),o.a.createElement("div",null,"你要觉得冷可以把空调制热打开")),o.a.createElement("ul",{className:"tl-items"},0===n.length?o.a.createElement("li",{className:"tl-loading"},o.a.createElement(L,{size:18})," ",o.a.createElement("span",null,"降温中……")):n.map((function(e,t){var n=e.objectId,r=e.content,a=e.temperature,i=e.createdAt;return o.a.createElement("li",{className:"tl-item",key:t},o.a.createElement("div",{className:"item-avatar"},o.a.createElement("img",{src:E.a,alt:"头像"})),o.a.createElement("div",{className:"item-content"},o.a.createElement("div",{className:"content-nickname"},"Juuun"),o.a.createElement("pre",{className:"content-text"},r),o.a.createElement("div",{className:"content-actions"},o.a.createElement("span",{className:"actions-time"},m(i)),o.a.createElement("span",{className:"stretched-box"}),o.a.createElement("button",{onClick:function(){return d(t)}},o.a.createElement("div",{className:"actions-dot"}),o.a.createElement("div",{className:"actions-dot"}),o.a.createElement("div",{className:c()("actions-overlay",{"actions-overlay-stretched":s===t})},o.a.createElement(p,{postId:n,defaultTemperature:a,index:t,onColder:function(e){return T(e>0?"多穿点儿":"少穿点儿")},onColdest:function(){return T("已经是最低温度")}}),o.a.createElement("span",{className:"overlay-action",onKeyDown:function(){return T()},onClick:function(){return T()},role:"button",tabIndex:t},o.a.createElement(y,{size:18}),o.a.createElement("span",null,"评论")))))))}))),o.a.createElement("div",{className:c()("tl-toast",{"tl-toast-active":C})},x))}},p532:function(e,t,n){"use strict";var r=n("I+eb"),o=n("xDBR"),a=n("/qmn"),i=n("0Dky"),c=n("0GbY"),l=n("SEBh"),u=n("zfnd"),s=n("busE");r({target:"Promise",proto:!0,real:!0,forced:!!a&&i((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,c("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),o||"function"!=typeof a||a.prototype.finally||s(a.prototype,"finally",c("Promise").prototype.finally)},tiKp:function(e,t,n){var r=n("2oRo"),o=n("VpIT"),a=n("UTVS"),i=n("kOOl"),c=n("STAE"),l=n("/b8u"),u=o("wks"),s=r.Symbol,m=l?s:s&&s.withoutSetter||i;e.exports=function(e){return a(u,e)||(c&&a(s,e)?u[e]=s[e]:u[e]=m("Symbol."+e)),u[e]}},zfnd:function(e,t,n){var r=n("glrk"),o=n("hh1v"),a=n("8GlL");e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}}}]);
//# sourceMappingURL=component---src-pages-cold-js-b17b48e56ea320dfa994.js.map